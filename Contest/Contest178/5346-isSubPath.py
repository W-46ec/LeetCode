
# Definition for singly-linked list.
# class ListNode:
#     def __init__(self, x):
#         self.val = x
#         self.next = None

# Definition for a binary tree node.
# class TreeNode:
#     def __init__(self, x):
#         self.val = x
#         self.left = None
#         self.right = None

class Solution:
	def isSubPath(self, head: ListNode, root: TreeNode) -> bool:
		treeNodes = []
		stack = [root]
		while len(stack) > 0:
			node = stack.pop(0)
			treeNodes.append(node)
			if node.left:
				stack.append(node.left)
			if node.right:
				stack.append(node.right)
		while head:
			treeNodes = list(filter(lambda x: x != None and x.val == head.val, treeNodes))
			treeNodes = [node.left for node in treeNodes if node != None] + \
						[node.right for node in treeNodes if node != None]
			if len(treeNodes) <= 0:
				return False
			head = head.next
		return True
		# def solve(tree, node):
		#     if tree == None:
		#         return False
		#     if tree.val == node.val:
		#         if node.next == None:
		#             return True
		#         if solve(tree.left, node.next) or solve(tree.right, node.next):
		#             return True
		#         else:
		#             return solve(tree.left, head) or solve(tree.right, head)
		#     else:
		#         return solve(tree.left, head) or solve(tree.right, head)
		# return solve(root, head)

"""
testcase
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,1,1,1,null,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,null,1,null,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,null,1,1,1,1,null,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,1,1,1,null,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,null,1,1,null,null,null,1,null,1,1,1,1,1,1,null,1,1,1,1,1,1,null,1,1,1,1,1,1,null,1,1,null,1,1,1,1,1,null,1,null,null,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,null,1,null,1,1,1,1,1,1,1,1,1,null,1,null,null,1,1,null,1,1,1,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,1,null,1,null,null,1,null,1,1,1,1,1,1,1,1,1,1,null,1,1,null,null,null,1,1,1,1,1,1,1,null,1,1,null,1,1,1,null,1,1,1,1,1,1,null,null,null,null,null,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,1,null,null,null,null,1,1,null,1,1,1,1,1,1,null,1,1,1,1,1,1,1,null,null,1,null,null,null,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,null,null,1,1,null,null,1,1,null,1,null,1,null,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,null,1,1,null,null,1,1,1,null,null,1,1,null,null,null,1,1,1,null,null,null,1,1,null,null,1,null,1,1,1,1,null,null,null,null,1,1,1,null,1,1,1,null,null,1,null,1,1,1,null,null,1,1,1,1,1,1,1,1,null,null,null,null,1,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,1,1,1,1,1,1,1,1,1,null,null,1,1,1,1,1,null,null,1,1,1,1,null,1,1,1,1,1,null,1,1,null,null,1,1,null,1,null,1,null,null,null,null,null,null,1,1,1,1,1,1,null,1,1,1,null,1,1,1,1,1,1,1,1,1,null,null,null,null,1,1,1,1,1,1,1,1,1,null,1,1,null,null,1,null,null,1,1,1,1,1,1,1,1,1,null,1,1,1,null,1,null,null,1,null,1,1,1,1,1,1,1,null,1,null,null,null,null,null,1,1,null,null,null,null,1,1,1,1,1,1,null,1,1,1,null,1,null,null,null,null,1,null,null,null,1,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,null,null,1,1,null,null,null,null,1,1,null,1,1,1,1,null,null,null,null,null,1,null,1,null,1,null,1,1,1,null,null,null,null,1,1,null,null,null,null,null,1,1,1,1,1,null,null,null,null,null,1,null,null,1,1,1,1,1,null,1,null,null,null,null,1,1,1,1,1,1,1,null,null,1,1,null,1,1,null,1,1,1,null,null,1,null,1,1,null,null,1,1,1,1,1,1,null,1,1,null,1,null,null,null,1,1,1,1,1,1,1,1,null,null,null,1,1,1,1,1,null,1,1,null,1,null,null,null,1,1,1,1,1,1,1,1,1,null,null,1,null,1,null,null,null,null,null,1,1,1,1,1,1,1,null,null,null,1,1,1,1,null,null,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,1,null,null,null,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,1,null,1,1,null,null,1,1,1,null,1,1,1,null,1,1,1,1,1,1,null,1,1,1,1,1,1,1,null,1,1,1,null,1,null,null,1,1,1,null,null,null,1,1,null,1,null,1,1,1,null,1,null,null,null,null,1,null,1,null,null,null,1,null,1,null,1,1,1,null,1,1,null,null,1,1,1,1,1,1,null,null,1,1,null,null,null,null,null,null,null,1,1,1,1,1,1,1,null,1,1,null,null,null,1,1,null,null,1,null,null,1,1,1,1,null,1,1,1,null,null,1,null,null,null,null,1,null,null,1,1,1,1,1,1,1,null,null,1,1,null,1,null,null,1,1,null,1,null,1,1,1,1,1,null,null,null,null,1,null,1,1,null,1,null,null,1,1,null,null,1,1,1,null,1,1,1,1,null,null,null,null,1,null,1,1,1,1,1,1,1,1,null,null,null,null,null,null,1,null,null,null,1,1,1,null,1,1,1,1,1,null,null,1,1,1,null,null,1,1,1,1,1,null,1,1,null,1,null,null,null,1,null,1,null,null,null,null,1,null,null,null,null,1,1,null,null,null,1,1,null,null,null,null,1,null,null,1,1,1,null,null,1,1,1,1,1,null,1,null,null,1,1,null,1,1,null,1,1,1,1,1,1,1,null,1,1,1,null,null,1,1,null,1,1,1,null,null,null,null,null,null,null,null,null,null,null,null,1,1,1,1,1,null,null,null,null,1,null,null,1,null,null,null,1,null,1,1,null,null,null,null,1,null,1,null,null,1,1,1,1,null,1,1,null,null,null,null,1,1,1,1,1,1,1,1,1,null,1,1,null,1,null,null,null,null,1,null,1,null,1,1,1,1,1,null,null,1,null,null,1,null,null,null,1,null,null,1,null,null,1,null,null,null,1,null,1,1,null,null,1,1,1,1,null,1,null,1,null,1,null,null,1,1,1,1,1,null,null,null,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,null,1,1,1,1,null,null,1,1,1,null,1,null,null,1,1,null,1,1,1,1,1,1,null,1,null,1,null,null,null,1,null,null,1,1,null,1,1,null,1,1,1,1,1,1,null,1,1,null,null,1,null,1,1,null,null,null,null,null,null,null,1,1,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,null,null,1,null,null,null,null,1,1,null,null,1,null,1,null,null,1,1,null,null,1,null,1,1,null,null,1,null,null,1,1,1,null,1,null,null,null,null,1,null,null,null,null,1,null,null,null,null,null,null,1,null,1,null,1,1,1,null,1,1,null,null,null,null,null,null,null,1,null,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,null,1,1,1,1,1,null,null,null,null,1,null,null,null,null,1,null,1,1,1,null,null,null,null,1,null,null,null,1,1,1,1,null,1,1,1,null,null,null,1,1,1,null,null,null,1,null,1,1,null,null,1,null,null,null,1,null,null,null,null,1,1,null,1,null,1,null,1,null,1,null,1,1,null,null,null,null,null,null,null,null,null,1,1,1,1,1,1,null,null,1,null,null,null,null,null,null,null,null,null,1,null,null,null,1,null,null,null,1,1,1,1,1,1,1,1,1,1,null,null,1,1,null,null,1,1,null,null,null,null,1,null,1,1,null,1,1,1,1,1,1,1,1,1,null,null,null,null,1,1,null,null,null,1,1,1,1,null,1,1,1,null,null,1,null,null,1,1,null,null,null,null,null,1,null,null,1,1,null,1,1,1,null,null,1,1,1,1,1,null,1,1,1,1,null,null,null,null,null,null,1,null,1,1,1,null,1,1,null,null,1,null,null,null,1,1,null,null,null,null,null,null,1,1,null,1,null,1,null,null,null,null,null,1,null,1,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,1,1,1,null,null,null,null,1,1,1,1,null,1,null,null,1,null,null,null,1,null,1,1,null,null,1,1,null,null,null,null,null,null,1,null,null,null,1,null,null,null,null,null,null,null,null,null,1,1,null,null,1,null,null,1,null,1,1,null,null,1,1,null,1,1,1,null,null,null,null,null,null,1,1,1,null,null,1,1,1,1,1,null,null,null,1,1,1,1,null,1,null,1,1,1,1,null,null,null,null,1,1,1,null,null,null,1,1,1,null,1,null,1,null,null,null,null,null,null,1,null,null,1,null,null,null,null,1,1,null,1,1,null,1,1,1,null,1,1,1,1,1,1,1,null,null,null,1,1,null,1,1,1,null,null,1,1,null,null,null,null,1,null,1,null,null,1,null,null,null,null,null,null,null,1,1,1,null,1,1,1,null,null,null,null,1,1,1,1,1,1,null,null,1,null,null,null,1,1,null,null,1,null,1,1,1,null,null,null,null,null,null,1,1,null,null,null,null,null,1,1,1,null,1,1,1,1,null,1,1,null,null,1,null,null,null,1,1,1,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,1,null,null,1,1,null,null,1,1,1,1,null,null,null,null,null,null,1,null,null,null,1,null,1,1,null,null,null,1,null,1,null,null,null,null,1,1,1,1,1,1,null,null,null,null,null,null,null,1,1,1,null,null,1,null,1,null,null,null,1,1,1,1,1,1,1,1,1,1,null,1,null,1,1,1,1,1,null,1,1,null,1,1,1,1,1,1,null,null,1,1,null,null,1,1,1,null,null,null,1,null,1,1,1,1,1,1,1,null,null,1,null,1,null,null,1,1,null,null,1,null,null,1,null,1,null,null,1,1,null,null,null,1,null,null,1,1,1,1,null,1,1,1,1,null,1,null,1,null,1,null,null,null,null,null,null,1,1,1,1,1,null,1,null,null,1,1,1,1,1,null,1,1,1,1,1,null,null,null,1,1,null,null,1,null,null,null,null,null,null,null,null,1,1,1,null,null,null,null,null,null,1,null,1,null,null,null,1,1,null,null,null,1,null,null,1,1,null,null,1,null,null,1,1,null,null,null,1,1,null,null,null,null,1,1,null,null,null,null,null,null,null,1,null,1,1,null,1,null,1,1,1,1,1,null,null,null,null,null,null,1,null,1,null,1,null,null,1,null,null,null,null,null,null,null,1,1,1,1,1,1,null,null,1,1,1,null,1,null,1,null,1,null,null,1,null,null,null,null,null,1,1,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,1,null,null,null,null,1,1,null,null,null,null,null,null,null,null,null,1,null,null,null,1,null,1,null,null,null,null,null,null,1,1,null,null,null,null,1,1,1,1,null,1,1,1,1,1,1,1,1,1,1,1,1,1,null,null,1,null,1,1,null,null,null,1,1,null,null,1,1,null,1,null,1,1,1,null,1,1,1,null,null,null,1,1,null,1,null,1,null,null,null,null,null,null,1,1,1,null,null,null,null,null,1,1,1,null,null,null,null,null,null,1,null,null,1,null,1,1,null,1,null,null,1,1,1,1,1,null,null,1,null,null,null,null,null,null,null,1,null,null,1,null,null,1,1,null,null,null,1,null,null,1,null,null,1,1,1,1,1,1,1,1,1,null,1,1,1,1,1,null,1,null,null,null,null,null,null,null,null,null,null,1,null,null,1,1,1,1,1,1,1,1,1,null,1,null,null,null,null,null,null,1,null,1,1,null,null,null,null,null,null,null,1,1,null,null,null,null,null,null,null,null,null,null,1,1,null,null,null,null,1,null,1,1,1,null,1,null,1,null,null,null,null,null,null,null,null,null,null,1,1,1,null,null,null,1,1,null,1,1,1,1,null,1,null,1,1,null,null,null,null,1,null,null,null,null,null,1,null,1,1,1,1,null,1,null,null,null,null,null,null,1,null,null,1,null,null,null,1,1,1,1,null,1,1,1,1,null,null,null,null,null,null,null,null,1,null,1,1,1,1,1,null,null,null,1,null,1,null,null,null,1,null,null,null,null,1,1,1,1,null,null,1,1,null,1,1,1,1,1,null,1,1,null,null,null,null,null,1,1,null,1,null,null,1,1,1,1,null,null,1,null,null,1,null,null,1,1,null,null,null,1,null,null,1,1,null,1,1,null,1,null,null,null,null,null,null,1,null,1,1,1,1,1,null,null,null,1,1,null,1,null,1,null,1,1,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,1,1,null,null,1,null,1,1,1,1,null,1,1,1,1,null,1,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,1,1,1,null,1,null,null,null,null,null,1,1,1,null,1,1,null,null,1,1,null,null,null,null,1,1,1,1,null,null,null,null,null,null,1,null,1,1,1,1,null,null,null,null,null,1,1,null,null,null,null,null,1,null,null,null,null,null,null,null,1,1,1,1,null,null,null,null,1,null,1,null,1,null,null,null,1,1,null,null,1,1,null,null,null,null,null,null,1,1,null,null,null,1,null,null,1,null,1,null,1,1,null,null,null,1,1,1,null,null,null,null,null,null,null,1,null,null,null,1,null,null,null,1,null,1,1,1,null,null,null,null,null,null,1,null,null,1,null,null,1,1,null,null,null,1,null,1,1,null,1,1,null,null,null,null,null,null,1,1,1,1,null,1,null,null,null,1,1,null,null,null,1,null,null,null,null,null,1,null,null,null,null,1,1,null,1,1,null,1,1,1,null,null,null,null,1,1,null,null,null,null,null,1,1,1,null,null,1,null,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,1,null,null,null,null,null,null,1,null,null,null,null,1,null,null,null,1,null,null,1,null,null,1,null,null,1,null,null,null,1,1,1,1,null,1,null,null,null,null,1,1,null,1,null,1,1,null,1,1,null,null,null,1,1,1,null,null,null,1,null,null,1,null,null,1,null,null,null,null,null,1,null,null,1,null,null,1,1,null,null,null,1,null,null,1,null,null,1,null,null,null,1,1,1,1,null,null,null,null,1,1,null,null,null,1,null,null,1,1,1,1,null,1,null,null,null,null,null,null,1,null,null,null,null,null,null,null,1,null,null,null,null,1,null,null,1,null,1,null,null,null,1,1,null,null,null,null,null,null,1,null,null,1,1,null,null,null,1,1,1,null,null,null,null,null,1,1,null,null,1,null,null,1,1,1,null,null,1,null,1,null,null,null,1,1,1,1,null,1,1,null,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,null,null,1,null,1,1,1,1,1,null,null,1,null,null,null,null,null,null,null,1,1,null,null,null,null,null,null,null,null,1,null,1,null,null,1,null,null,1,1,null,1,null,null,null,1,null,null,1,null,null,1,1,null,null,null,null,1,null,null,null,null,1,null,null,1,null,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,1,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,1,null,1,null,null,1,null,null,1,null,null,null,null,1,1,1,1,null,null,null,null,1,1,1,1,null,1,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,1,null,null,1,1,null,null,1,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,null,1,1,1,null,null,1,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,1,null,1,null,null,null,null,null,null,null,null,1,null,null,null,null,1,1,null,1,1,null,null,1,null,null,null,null,1,null,null,1,1,1,1,null,null,1,1,1,1,1,null,null,1,null,null,1,null,null,null,null,1,1,1,null,1,null,null,1,null,null,null,null,1,null,null,null,1,null,null,null,null,null,null,null,null,1,null,null,1,1,null,null,null,1,1,null,null,1,null,null,null,null,null,null,null,1,null,null,null,null,null,1,null,null,null,null,null,null,1,null,null,null,null,1,1,null,null,null,null,null,null,null,null,1,1,null,null,null,1,1,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,null,null,null,1,null,1,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,null,1,1,1,null,null,null,null,null,null,null,null,null,1,1,null,null,null,null,null,null,null,null,null,1,null,1,null,null,1,null,1,null,null,1,1,null,1,1,null,1,1,1,1,1,1,null,null,null,1,null,null,1,1,null,null,null,null,null,null,null,null,1,1,1,null,null,1,1,null,null,1,1,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,null,1,null,null,null,1,1,null,null,1,null,1,1,1,1,null,null,1,null,null,null,null,null,null,null,null,1,null,null,1,1,null,1,1,1,null,null,null,null,1,1,1,1,null,null,1,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,1,null,null,1,null,1,null,null,null,null,1,null,null,null,1,1,null,1,null,null,null,1,null,null,null,null,null,1,1,null,1,null,1,null,null,null,null,1,1,1,1,null,1,null,1,1,null,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,null,1,null,1,null,null,1,1,null,null,null,1,1,null,1,null,1,null,null,null,null,1,null,null,null,null,null,null,null,null,null,null,null,null,1,1,null,null,1,null,null,1,null,null,null,null,null,1,null,null,null,null,1,null,null,null,1]
"""

